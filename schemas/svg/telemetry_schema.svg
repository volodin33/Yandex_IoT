<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="DESCRIPTION" height="290px" preserveAspectRatio="none" style="width:1673px;height:290px;background:#FFFFFF;" version="1.1" viewBox="0 0 1673 290" width="1673px" zoomAndPan="magnify"><title>C4 &#8212; Components: TelemetryService</title><defs/><g><g class="title" data-source-line="4"><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="249.7441" x="705.1064" y="25.1074">C4 &#8212; Components: TelemetryService</text></g><!--cluster ts--><g class="cluster" data-entity="ts" data-source-line="1666" data-uid="ent0004" id="cluster_ts"><rect fill="none" height="238" style="stroke:#444444;stroke-width:1;stroke-dasharray:7,7;" width="1088" x="308" y="46.6211"/><text fill="#444444" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="257.875" x="723.0625" y="85.8867">TelemetryService (ASP.NET Core)</text><text fill="#444444" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="62.0039" x="820.998" y="102.8516">[container]</text></g><!--entity consumer--><g class="entity" data-entity="consumer" data-source-line="83" data-uid="ent0005" id="entity_consumer"><rect fill="#85BBF0" height="145.0273" style="stroke:#78A8D8;stroke-width:0.5;" width="218.2891" x="324" y="123.1211"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="72.7207" x="396.7842" y="146.0703">&#171;component&#187;</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="198.2891" x="334" y="166.3477">TelemetryEventConsumer</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="68.6777" x="369.4619" y="183.3125">[MassTransit</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="3.334" x="438.1396" y="183.3125">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="55.3535" x="441.4736" y="183.3125">Consumer</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="151.3945" x="357.4473" y="199.2734">(IConsumer&lt;DeviceEvent&gt;)]</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="3.8896" x="431.1997" y="217.3926">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="58.8848" x="368.4595" y="236.0137">&#1051;&#1086;&#1075;&#1080;&#1088;&#1091;&#1077;&#1090;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="3.8896" x="427.3442" y="236.0137">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="54.8857" x="431.2339" y="236.0137">&#1089;&#1086;&#1073;&#1099;&#1090;&#1080;&#1077;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="3.8896" x="486.1196" y="236.0137">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="7.8203" x="490.0093" y="236.0137">&#1080;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66.8691" x="357.7236" y="254.6348">&#1089;&#1086;&#1093;&#1088;&#1072;&#1085;&#1103;&#1077;&#1090;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="3.8896" x="424.5928" y="254.6348">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="80.083" x="428.4824" y="254.6348">&#1090;&#1077;&#1083;&#1077;&#1084;&#1077;&#1090;&#1088;&#1080;&#1102;</text></g><!--entity repo--><g class="entity" data-entity="repo" data-source-line="83" data-uid="ent0006" id="entity_repo"><rect fill="#85BBF0" height="129.0664" style="stroke:#78A8D8;stroke-width:0.5;" width="217.9824" x="771" y="131.1211"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="72.7207" x="843.6309" y="154.0703">&#171;component&#187;</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="104.8984" x="827.542" y="174.3477">DbRepository</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="120.7031" x="819.6396" y="191.3125">[ITelemetryRepository]</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="3.8896" x="878.0464" y="209.4316">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="69.9795" x="781" y="228.0527">&#1057;&#1086;&#1093;&#1088;&#1072;&#1085;&#1103;&#1077;&#1090;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="3.8896" x="850.9795" y="228.0527">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="49.2666" x="854.8691" y="228.0527">&#1076;&#1072;&#1085;&#1085;&#1099;&#1077;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="3.8896" x="904.1357" y="228.0527">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="7.4375" x="908.0254" y="228.0527">&#1074;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="3.8896" x="915.4629" y="228.0527">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="18.6689" x="919.3525" y="228.0527">&#1041;&#1044;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="3.8896" x="938.0215" y="228.0527">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="37.0713" x="941.9111" y="228.0527">&#1095;&#1077;&#1088;&#1077;&#1079;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="17.8896" x="853.9292" y="246.6738">EF</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="3.8896" x="871.8188" y="246.6738">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="30.3447" x="875.7085" y="246.6738">Core</text></g><!--entity db--><g class="entity" data-entity="db" data-source-line="83" data-uid="ent0007" id="entity_db"><rect fill="#85BBF0" height="129.0664" style="stroke:#78A8D8;stroke-width:0.5;" width="215.3027" x="1165" y="131.1211"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="72.7207" x="1236.291" y="154.0703">&#171;component&#187;</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="156.4766" x="1194.4131" y="174.3477">TelemetryDbContext</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="18.668" x="1216.9639" y="191.3125">[EF</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="3.334" x="1235.6318" y="191.3125">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="26.0098" x="1238.9658" y="191.3125">Core</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="3.334" x="1264.9756" y="191.3125">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="60.0293" x="1268.3096" y="191.3125">DbContext]</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="3.8896" x="1270.7065" y="209.4316">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="195.3027" x="1175" y="228.0527">DbSet&lt;DeviceTelemetryEntity&gt;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="105.0273" x="1220.1377" y="246.6738">DeviceTelemetry</text></g><!--entity rabbit--><g class="entity" data-entity="rabbit" data-source-line="84" data-uid="ent0002" id="entity_rabbit"><path d="M11,117.6211 L183.7158,117.6211 C188.7158,117.6211 188.7158,195.7754 188.7158,195.7754 C188.7158,195.7754 188.7158,273.9297 183.7158,273.9297 L11,273.9297 C6,273.9297 6,195.7754 6,195.7754 C6,195.7754 6,117.6211 11,117.6211" fill="#438DD5" style="stroke:#3C7FC0;stroke-width:0.5;"/><path d="M183.7158,117.6211 C178.7158,117.6211 178.7158,195.7754 178.7158,195.7754 C178.7158,273.9297 183.7158,273.9297 183.7158,273.9297" fill="none" style="stroke:#3C7FC0;stroke-width:0.5;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="62.7129" x="61.0015" y="135.5703">&#171;container&#187;</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="75.5469" x="54.5845" y="155.8477">RabbitMQ</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="42.0059" x="71.355" y="172.8125">[AMQP]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="3.8896" x="90.4131" y="190.9316">&#160;</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="60.8945" x="61.9106" y="209.5527">&#1054;&#1095;&#1077;&#1088;&#1077;&#1076;&#1100;:</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="150.1719" x="17.272" y="228.1738">telemetry-service-queue</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="80.2334" x="11" y="246.7949">&#1057;&#1086;&#1086;&#1073;&#1097;&#1077;&#1085;&#1080;&#1077;:</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="3.8896" x="91.2334" y="246.7949">&#160;</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="78.5928" x="95.123" y="246.7949">DeviceEvent</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="114.3652" x="35.1753" y="265.416">(smarthome_core)</text></g><!--entity pg--><g class="entity" data-entity="pg" data-source-line="80" data-uid="ent0003" id="entity_pg"><path d="M1468,136.6211 C1468,126.6211 1562.4785,126.6211 1562.4785,126.6211 C1562.4785,126.6211 1656.957,126.6211 1656.957,136.6211 L1656.957,254.6875 C1656.957,264.6875 1562.4785,264.6875 1562.4785,264.6875 C1562.4785,264.6875 1468,264.6875 1468,254.6875 L1468,136.6211" fill="#438DD5" style="stroke:#3C7FC0;stroke-width:0.5;"/><path d="M1468,136.6211 C1468,146.6211 1562.4785,146.6211 1562.4785,146.6211 C1562.4785,146.6211 1656.957,146.6211 1656.957,136.6211" fill="none" style="stroke:#3C7FC0;stroke-width:0.5;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="62.7129" x="1531.1221" y="163.5703">&#171;container&#187;</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="92.4609" x="1516.248" y="183.8477">PostgreSQL</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="23.3379" x="1550.8096" y="200.8125">[DB]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="3.8896" x="1560.5337" y="218.9316">&#160;</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="60.04" x="1478" y="237.5527">&#1058;&#1072;&#1073;&#1083;&#1080;&#1094;&#1072;:</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="3.8896" x="1538.04" y="237.5527">&#160;</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="105.0273" x="1541.9297" y="237.5527">DeviceTelemetry</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="149.3652" x="1487.7959" y="256.1738">(DeviceTelemetryEntity)</text></g><!--link rabbit to consumer--><g class="link" data-entity-1="rabbit" data-entity-2="consumer" data-source-line="1779" data-uid="lnk8" id="link_rabbit_consumer"><path d="M189.19,195.6211 C230.76,195.6211 272.35,195.6211 315.84,195.6211" fill="none" id="rabbit-to-consumer" style="stroke:#666666;stroke-width:1;"/><polygon fill="#666666" points="323.84,195.6211,315.84,192.6211,315.84,198.6211,323.84,195.6211" style="stroke:#666666;stroke-width:1;"/><text fill="#666666" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="71.373" x="220" y="176.5703">DeviceEvent</text><text fill="#666666" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="42.0059" x="234.6836" y="192.5313">[AMQP]</text></g><!--link consumer to repo--><g class="link" data-entity-1="consumer" data-entity-2="repo" data-source-line="1779" data-uid="lnk9" id="link_consumer_repo"><path d="M542.01,195.6211 C611.46,195.6211 693.38,195.6211 762.86,195.6211" fill="none" id="consumer-to-repo" style="stroke:#666666;stroke-width:1;"/><polygon fill="#666666" points="770.86,195.6211,762.86,192.6211,762.86,198.6211,770.86,195.6211" style="stroke:#666666;stroke-width:1;"/><text fill="#666666" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="167.4258" x="573" y="192.5703">SaveAsync(DeviceTelemetry)</text></g><!--link repo to db--><g class="link" data-entity-1="repo" data-entity-2="db" data-source-line="1779" data-uid="lnk10" id="link_repo_db"><path d="M989.26,195.6211 C1043.99,195.6211 1102.19,195.6211 1156.72,195.6211" fill="none" id="repo-to-db" style="stroke:#666666;stroke-width:1;"/><polygon fill="#666666" points="1164.72,195.6211,1156.72,192.6211,1156.72,198.6211,1164.72,195.6211" style="stroke:#666666;stroke-width:1;"/><text fill="#666666" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="23.3262" x="1060.5264" y="160.5703">Add</text><text fill="#666666" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="3.334" x="1083.8525" y="160.5703">&#160;</text><text fill="#666666" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="7.0078" x="1087.1865" y="160.5703">+</text><text fill="#666666" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="114.7207" x="1020" y="176.5313">SaveChangesAsync</text><text fill="#666666" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="18.668" x="1051.6875" y="192.4922">[EF</text><text fill="#666666" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="3.334" x="1070.3555" y="192.4922">&#160;</text><text fill="#666666" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="29.3438" x="1073.6895" y="192.4922">Core]</text></g><!--link db to pg--><g class="link" data-entity-1="db" data-entity-2="pg" data-source-line="1779" data-uid="lnk11" id="link_db_pg"><path d="M1380.33,195.6211 C1408.99,195.6211 1431.75,195.6211 1459.64,195.6211" fill="none" id="db-to-pg" style="stroke:#666666;stroke-width:1;"/><polygon fill="#666666" points="1467.64,195.6211,1459.64,192.6211,1459.64,198.6211,1467.64,195.6211" style="stroke:#666666;stroke-width:1;"/><text fill="#666666" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="24.668" x="1413" y="192.5703">SQL</text></g><!--SRC=[RPBTYjD05CVlynHZhnAqxSrUbMMXctQrq6e_iXU2KF9nQ0F99CvCgaM4jOkAh2Z2tWc2Fa5NjrXOrsUOl89FufcqJMEG439pSZx-vtVE7P-wGU81cGeHyqQzpkndjOalfecJS61kH0LGKNEZi1u7DXL965Ivy0BVgPi7rRuodVQwzT3c0XYQncOKnX5LCJ7wQbgt-VZHgJNkja-iyR1p_u6b6vhmHG34F21_pYv97i0Rn880GX1iFW8syrtGD1C5s3u5DaWW0PtPZkEBUwGop0wzGGNFpTwWhxxoI_fMhj8pkPBNwVi64RjiLRv9LtsgaZoXyglyZSzL-WvTR-LQhXga1SgZFKCXHEUXpSGq2c7iHWoCYh7NqNBqU8B5-X4N4mQZGLULRXrd0hx9fRoIDtATlf7BNSwyAQAN36sA9EOg_Jx_-3XAg6UpkIuufYmJ8NfprAyzR5l8BLD6NcWQsKFKSM8y2O4LOxEkpEqF9RHdSsunct9Va9sTw9tTyR00uyZ8ElkCl7vWNsVfEI9UaFHL1l0YNIXyHAupI_eQwI_bRVfnuxH0lZVu_b9N_BLEFs2pHRaCuaZnSuPuG3aHcwjwdLpxltOrkL8HUQqkUBrGEhuJ-KbUadmHVfBsIOQgLDTpYe1QZk8FpuMgiGqWHQDIE09n-Dy17fK7ZRLUQjeGWdnV2rCfiCsNryYSzqvRAYDx1aq-fsvvSOnjnCOlwwNfUUGkKH7crAOJu5bWePzjY7BE5bXjhl4N]--></g></svg>